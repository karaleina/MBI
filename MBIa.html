
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>MBI - analiza składowych głównych </title>
        <link rel="stylesheet" type="text/css" href="http://www.templatki.net/podglad/business-template-blog/css/style.css" />
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>

    <body>
        <div id="wrapper">
            <div id="header">
                <div id="logo">
                    <h2>MBI - analiza składowych głównych (PCA) </h2>
                </div>
            </div>
        </div>

        <div id="container">
            <div id="sidebar">
                <div id="content_box">
                   	<h2>Wybierz wymiar danych wejściowych</h2>
                    <form>
                      <p>Liczba <i>m</i> cech</p>
                      <select id="wymiar_m">
                          <option value="2">2</option>
                      		<option value="3">3</option>
                      		<option value="4">4</option>
                      		<option value="5">5</option>
                    	</select>
                    </form>
                    <form>
                      <p>Liczba <i>n</i> pomiarów</p>
                    	<select id="wymiar_n">
                      		<option value="2">2</option>
                      		<option value="3">3</option>
                      		<option value="4">4</option>
                      		<option value="5">5</option>
                      		<option value="6">6</option>
                      		<option value="7">7</option>
                    	</select>
                    </form>

                    <h2>Wprowadź dane wejściowe</h2>
                    <!--<div id="form-errors"></div>-->

                    <form class="form-horizontal" role="form">
                        <div id="input_table_print">
                            <table id="input_data_table" class='hidden' table border="1" cellspacing="5">
                                <tr>
                                   <th></th>	<th>M1</th>	<th>M2</th>
                                </tr>
                                <tr>
                                   <th>N1</th>	<td contenteditable='true'></td>	<td contenteditable='true'></td>
                                </tr>
                                <tr>
                                   <th>N2</th>	<td contenteditable='true'></td>	<td contenteditable='true'></td>
                                </tr>
                            </table>
                        </div>

                        <input type="button" id="createDataTable"  value="Stwórz arkusz do wprowadzania danych"><br/><br/>
                        <input type="button" id="deleteDataTable"  value="Usuń arkusz"><br/><br/>

                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="krokowo" class="col-sm-6 control-label">Działanie krok po kroku</label>
                                <div class="col-sm-1 control-label">
                                    <input type="checkbox" class="form-control" id="krokowo"/>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions col-sm-12">
                            <input type="button"  id="getData" value="Wczytaj dane"><br/><br/>
                            <!-- <input type="button"  id="setExampleData" value="Wczytaj przykładowe dane"><br/><br/>
                            <input type="button"  id="start" value="Start" disabled='true'> -->
                        </div>
                    </form>

                </div>

                <div id="content_box">
                    <h2>Wzór z którego korzystamy:</h2>
                </div>

            </div>

            <div id="solid" class="border">
                <div class="solid_title1">Działanie algorytmu</div>
                    <div id="steps">
                    </div>
            </div>
        </div>

        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="MBIjavascript.js" ></script>
        <script src="pca-with-dependencies.js"></script>

        <script>

        $(document).ready(function(){

            var nieznormalizowane_dane = null;

            function getM(){
              var wymiar_m = $("#wymiar_m").val();
              console.log("Wybrana liczba m cech = " + wymiar_m);
              return wymiar_m;
            }
            function getN(){
              var wymiar_n = $("#wymiar_n").val();
              console.log("Wybrana liczba n cech = " + wymiar_n);
              return wymiar_n;
            }

            function countMeans(array, m, n){

              var srednie_atrybutow = [];
              for (var i = 0; i< m; i++){
                  // po rzędach
                  var suma_cechy = 0;
                  for (var j = 0; j< n; j++) {
                      suma_cechy += parseFloat(array[j][i]);
                  }
                  srednie_atrybutow[i] = suma_cechy/n;
              }
              return srednie_atrybutow;
            }

            function translateDataIntoMatrix(m, n) {

                console.log("Zainicjalizowano macierz przechowującą dane...");
                var nieznormalizowane_dane = new Matrix(parseFloat(n),  parseFloat(m));
                var dataMatrix = [];
                var currentValue = 0;
                var currentRow = 0;
                var dataCurrentRow = [];

                for( var i = 1; i <= n; i++){
                    dataCurrentRow=[];
                    currentRow = $('#input_data_table').find(".N" + i);
                    for (var j = 1; j<= m; j++){
                        currentValue = currentRow.find(".M" + j).text();
                        dataCurrentRow.push(currentValue);

                    }
                    dataMatrix.push("[" + dataCurrentRow + "]");
                    nieznormalizowane_dane[i - 1] = dataCurrentRow;
                }
                return nieznormalizowane_dane;
            }

            $("#getData").on("click", function(){
                var m = getM();
                var n = getN();

                var nieznormalizowane_dane = translateDataIntoMatrix(m, n);
                var nieznormalizowane_2d_array = nieznormalizowane_dane.to2DArray();
                var srednie_atrybutow = countMeans(nieznormalizowane_2d_array, m, n);
                console.log(srednie_atrybutow);
            });


            /*
            const dataset = mldatasetiris.getNumbers();

            // dataset is a two-dimensional array where rows represent the samples and columns the features
            const pca = new PCA(dataset);
            console.log(pca.getExplainedVariance());

                  const newPoints = [[4.9, 3.2, 1.2, 0.4], [5.4, 3.3, 1.4, 0.9]];
            console.log(pca.predict(newPoints)); // project new points into the PCA space

            // Operacje na macierzach
                  var m1 = Matrix.ones(5, 5);
                  var m2 = Matrix.ones(5, 5);

            var multiplied = m1.mmul(m2);
                  var determinant = multiplied.det();

                  console.log(multiplied);
                  console.log(determinant);

            // Możesz odwoływać się też do ml-stat
            console.log(mlstat.array.sum([1, 2, 3]));

            // I do ml-array-utils
            console.log(mlarrayutils.applyDotProduct([1, 2, 3], [1, 2, 3]));

            var kosmos = 132;
            var blabla = new Matrix (([[2,3],[3,4]]), 2);
            console.log("Czy to macierz?: " + Matrix.isMatrix(blabla) );
            console.log("Czy to macierz?: " + Matrix.isMatrix(kosmos) );
            //var blabla_array = Matrix.to2DArray(blabla);

            //console.log(blabla_array[0].length);*/
        });

      	</script>
    </body>
</html>
